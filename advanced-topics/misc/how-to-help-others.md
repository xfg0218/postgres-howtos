帮助他人的两个关键原则（可以是对队友的内部帮助，也可以是外部咨询，没关系）：

1. 依靠好的资源。
2. 测试一切。

**原则1.良好的来源**

依靠您信任的高质量来源。例如，我的观点，对质量/可信赖程度进行排名，大致如下：

- PG文档-9/10
- PG源代码-10/10（真相来源！）
- StackOverflow随机答案-5/10或更低（不包括 [Erwin Brandstetter](https://stackoverflow.com/users/939860/erwin-brandstetter)、[Laurenz Albe](https://stackoverflow.com/users/6464308/laurenz-albe)、[Peter Eisentraut](https://stackoverflow.com/users/98530/peter-eisentraut) - 这些人在那里回答问题时表现很棒，8/10或更高）
- 随机博客文章也是如此
- [Suzuki](https://www.interdb.jp/pg/) 和 [Rogov](https://postgrespro.com/blog/pgsql/5969637) 的《内部》书籍-8/10或更高版本
- 等。

并且（重要！）始终提供指向您的资源的链接；您可以从中获得两个好处：
- 宣传好的来源并回报他们；
- 在一定程度上分担责任（如果你还不是很有经验，这很有帮助；每个人都可能犯错误）。

**原则2.验证-数据库实验**

总是怀疑一切，不要相信语言模型，不管它们的性质如何。

如果有人（包括你或我）在没有通过实验验证的情况下说了什么，它需要通过实验来修复。

所有决策都应基于数据做出 -- 可靠的数据是通过测试收集的。

大多数与数据库相关的想法都将通过数据库实验进行验证。

多会话实验-成熟的基准测试，例如使用 `pgbench`、`JMeter`、`sysbench`、`pgreplay-go` 等进行的基准测试。

他们的目标是研究Postgres作为一个整体的行为，它的所有组件，并且必须在没有其他人做任何工作的专用资源上执行。环境应该与生产相匹配（虚拟机和磁盘类型、PG版本、设置）。

此类实验的示例包括负载测试、压力测试、性能回归测试。主要工具是那些旨在研究宏观查询分析的工具：`pgss`、等待事件分析（又名活动会话历史或性能/查询洞察）、`auto_explain`、`pgBadger`等。

有关此类实验的更多信息：[第13天：如何进行基准测试。](https://gitlab.com/postgres-ai/docs/-/tree/master)


单会话实验--使用单个会话（有时是两个）测试一个或一系列SQL查询，检查查询语法，研究单个查询行为，优化特定查询等。

这些实验可以在共享环境中，在较弱的机器上进行。但是，要研究查询性能，您需要具有相同的PG版本、相同或相似的数据库以及匹配的计划器设置（如何做到这一点：[第56天：如何使非生产Postgres计划器的行为与生产](https://gitlab.com/postgres-ai/docs/-/tree/master) 中的一样）。在这种情况下，应该记住，与生产相比，计时指标可能明显偏离，查询优化过程中的主要注意力应该放在执行计划和数据量上（实际行、缓冲区操作计数由`EXPLAIN` 中的选项 `BUFFERS` 提供）。

此类实验的示例：检查一系列SQL查询的语法和逻辑行为、查询性能分析 `EXPLAIN (ANALYZE, BUFFERS)` 和测试优化思想、模式更改测试等。能够快速克隆大型数据库而不支付额外的存储费用非常有帮助（Neon、Amazon Aurora）。如果不为存储和计算支付额外的费用，那就更好了，这真正开启了测试活动，包括CI/CD中的自动化测试（DBLab Engine@Database_Lab）。

# 小结

如您所见，原理非常简单：

- 阅读好的论文，并且
- 不要盲目信任--测试一切。

